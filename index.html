import express from "express";
import fetch from "node-fetch";

const app = express();
app.use(express.json());

// ===== ĞšĞĞĞ¤Ğ˜Ğ“Ğ£Ğ ĞĞ¦Ğ˜Ğ¯ =====
const BOT_TOKEN = "8543838613:AAF8eAPsGVBXbzDGD7oqZX2xptTrBpuzFf8";
const ADMINS = [123456789, 987654321];
// ========================

app.post("/api/apply", async (req, res) => {
  const d = req.body;

  const text = `
ğŸ“¨ ĞĞ¾Ğ²Ğ°Ñ Ğ°Ğ½ĞºĞµÑ‚Ğ°

ğŸ‘¤ Ğ˜Ğ¼Ñ: ${d.name}
ğŸ® Minecraft: ${d.mc}
ğŸ‚ Ğ’Ğ¾Ğ·Ñ€Ğ°ÑÑ‚: ${d.age}
ğŸ–¥ ĞŸĞ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ°: ${d.platform}
ğŸŒ Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ°: ${d.country}

â± ĞĞ¿Ñ‹Ñ‚: ${d.experience}
âŒ› Ğ’Ñ€ĞµĞ¼Ñ Ğ² Ğ½ĞµĞ´ĞµĞ»Ñ: ${d.time}

ğŸ’¬ Ğ˜Ğ½Ñ‚ĞµÑ€ĞµÑ:
${d.interest}

ğŸ‘¤ Telegram: @${d.telegram?.username || "â€”"}
`;

  for (const id of ADMINS) {
    await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ chat_id: id, text })
    });
  }

  res.json({ ok: true });
});

app.listen(3000);
